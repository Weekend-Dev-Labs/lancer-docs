"use strict";(self.webpackChunklancer_docs=self.webpackChunklancer_docs||[]).push([[1225],{2901:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"libraries and sdk/express-js-server-sdk","title":"Express.js SDK","description":"Installation","source":"@site/docs/libraries and sdk/express-js-server-sdk.md","sourceDirName":"libraries and sdk","slug":"/libraries and sdk/express-js-server-sdk","permalink":"/lancer-docs/hi-IN/docs/libraries and sdk/express-js-server-sdk","draft":false,"unlisted":false,"editUrl":"https://github.com/weekend-dev-labs/lancer-docs/docs/libraries and sdk/express-js-server-sdk.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Express.js SDK"},"sidebar":"tutorialSidebar","previous":{"title":"Next.js Server SDK","permalink":"/lancer-docs/hi-IN/docs/libraries and sdk/next-js-server-sdk"},"next":{"title":"Roadmap","permalink":"/lancer-docs/hi-IN/docs/roadmap"}}');var i=s(4848),t=s(8453);const l={sidebar_position:2,title:"Express.js SDK"},d=void 0,o={},c=[{value:"<strong>Installation</strong>",id:"installation",level:2},{value:"<strong>Getting Started</strong>",id:"getting-started",level:2},{value:"<strong>1. Initialize the Lancer SDK</strong>",id:"1-initialize-the-lancer-sdk",level:3},{value:"<strong>2. Set Up API Routes</strong>",id:"2-set-up-api-routes",level:3},{value:"<strong>Authentication Middleware</strong>",id:"authentication-middleware",level:4},{value:"Example Request",id:"example-request",level:5},{value:"Example Response",id:"example-response",level:5},{value:"<strong>Webhook Middleware</strong>",id:"webhook-middleware",level:4},{value:"Verification Workflow",id:"verification-workflow",level:5},{value:"Example Webhook Payload",id:"example-webhook-payload",level:5},{value:"Example Response",id:"example-response-1",level:5},{value:"<strong>3. Directory Structure</strong>",id:"3-directory-structure",level:3},{value:"<strong>API Reference</strong>",id:"api-reference",level:2},{value:"<strong>Function: <code>lancer</code></strong>",id:"function-lancer",level:3},{value:"Constructor",id:"constructor",level:4},{value:"Methods",id:"methods",level:4},{value:"<strong>Types</strong>",id:"types",level:2},{value:"<code>SessionAuthGrant</code>",id:"sessionauthgrant",level:3},{value:"<code>WebhookEvent</code>",id:"webhookevent",level:3},{value:"<code>SessionRequest</code>",id:"sessionrequest",level:3},{value:"<strong>Security Best Practices</strong>",id:"security-best-practices",level:2},{value:"<strong>License</strong>",id:"license",level:2}];function a(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"installation",children:(0,i.jsx)(n.strong,{children:"Installation"})}),"\n",(0,i.jsx)(n.p,{children:"Install the SDK via npm:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install lancer-express-sdk\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"getting-started",children:(0,i.jsx)(n.strong,{children:"Getting Started"})}),"\n",(0,i.jsx)(n.h3,{id:"1-initialize-the-lancer-sdk",children:(0,i.jsx)(n.strong,{children:"1. Initialize the Lancer SDK"})}),"\n",(0,i.jsxs)(n.p,{children:["Create a reusable instance of the ",(0,i.jsx)(n.code,{children:"lancer"})," function with your ",(0,i.jsx)(n.code,{children:"signingSecret"})," for signature verification. Store this in a shared module for easy access across your API routes."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import lancer from "lancer-express-sdk";\n\nconst lancerInstance = lancer({\n  signingSecret: "<your-lancer-signing-secret>",\n});\n\nexport default lancerInstance;\n'})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"signingSecret"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Secret key used to verify webhook signatures."})]})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"2-set-up-api-routes",children:(0,i.jsx)(n.strong,{children:"2. Set Up API Routes"})}),"\n",(0,i.jsx)(n.h4,{id:"authentication-middleware",children:(0,i.jsx)(n.strong,{children:"Authentication Middleware"})}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"auth"})," method to handle session authentication in an Express.js route. Implement your custom logic within the handler."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import express from "express";\nimport lancerInstance from "@/lib/lancer";\n\nconst router = express.Router();\n\nrouter.post(\n  "/auth",\n  lancerInstance.auth(async ({ token, session }) => {\n    console.log("Session Payload:", session);\n    \n    // Custom authentication logic\n    return {\n      ownerId: "<user-id>", // Replace with actual user/owner ID\n      status: 200, // HTTP status code\n    };\n  })\n);\n\nexport default router;\n'})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"token"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsxs)(n.td,{children:["Lancer session token from the ",(0,i.jsx)(n.code,{children:"Authorization"})," header."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"session"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SessionRequest"})}),(0,i.jsx)(n.td,{children:"Payload containing session details from Lancer."})]})]})]}),"\n",(0,i.jsx)(n.h5,{id:"example-request",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'POST /auth\nAuthorization: Bearer <token>\n{\n  "sessionId": "abc123"\n}\n'})}),"\n",(0,i.jsx)(n.h5,{id:"example-response",children:"Example Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ownerId": "user123"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"webhook-middleware",children:(0,i.jsx)(n.strong,{children:"Webhook Middleware"})}),"\n",(0,i.jsxs)(n.p,{children:["Handle webhook events sent by Lancer with the ",(0,i.jsx)(n.code,{children:"webhook"})," method. Enable verification to ensure payload integrity using your ",(0,i.jsx)(n.code,{children:"signingSecret"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import express from "express";\nimport lancerInstance from "@/lib/lancer";\n\nconst router = express.Router();\n\nrouter.post(\n  "/webhook",\n  lancerInstance.webhook(async ({ event, payload }) => {\n    console.log("Webhook Event:", event);\n    \n    // Handle event data\n    return true;\n  }, true)\n);\n\nexport default router;\n'})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"handler"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"(event: WebhookEvent) => Promise<boolean>"})}),(0,i.jsx)(n.td,{children:"Callback function to process webhook events."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"verification"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"boolean"})}),(0,i.jsxs)(n.td,{children:["Enables payload verification (default: ",(0,i.jsx)(n.code,{children:"true"}),")."]})]})]})]}),"\n",(0,i.jsx)(n.h5,{id:"verification-workflow",children:"Verification Workflow"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The SDK verifies the ",(0,i.jsx)(n.code,{children:"x-timestamp"})," and ",(0,i.jsx)(n.code,{children:"x-signature"})," headers."]}),"\n",(0,i.jsx)(n.li,{children:"The payload is signed using HMAC SHA-256 and compared to the provided signature."}),"\n",(0,i.jsxs)(n.li,{children:["If the verification fails, the SDK responds with ",(0,i.jsx)(n.code,{children:"400 Bad Request"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"example-webhook-payload",children:"Example Webhook Payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "evt_123",\n  "type": "file.uploaded",\n  "payload": {\n    "fileId": "file_abc",\n    "userId": "user123"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h5,{id:"example-response-1",children:"Example Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": 200,\n  "message": "Webhook processed successfully"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"3-directory-structure",children:(0,i.jsx)(n.strong,{children:"3. Directory Structure"})}),"\n",(0,i.jsx)(n.p,{children:"Organize your Express.js project for modularity:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",children:"/lib/\n  lancer.js     # Lancer SDK instance\n/routes/\n  auth.js       # Authentication route\n  webhook.js    # Webhook route\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"api-reference",children:(0,i.jsx)(n.strong,{children:"API Reference"})}),"\n",(0,i.jsx)(n.h3,{id:"function-lancer",children:(0,i.jsxs)(n.strong,{children:["Function: ",(0,i.jsx)(n.code,{children:"lancer"})]})}),"\n",(0,i.jsx)(n.h4,{id:"constructor",children:"Constructor"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"lancer({ signingSecret: string });\n"})}),"\n",(0,i.jsx)(n.h4,{id:"methods",children:"Methods"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"auth(handler: Function): Middleware"})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Handles session authentication using custom logic."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"handler({ token, session }): Promise<{ ownerId: string; status: number }>"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"webhook(handler: Function, verification?: boolean): Middleware"})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Processes Lancer webhook events."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"handler({ event, payload }): Promise<boolean>"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"verification (optional): boolean"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"types",children:(0,i.jsx)(n.strong,{children:"Types"})}),"\n",(0,i.jsx)(n.h3,{id:"sessionauthgrant",children:(0,i.jsx)(n.code,{children:"SessionAuthGrant"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface SessionAuthGrant {\n  ownerId: string;\n  status: number;\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"webhookevent",children:(0,i.jsx)(n.code,{children:"WebhookEvent"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"type WebhookEvent<T> = {\n  type: string;\n  payload: T;\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"sessionrequest",children:(0,i.jsx)(n.code,{children:"SessionRequest"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface SessionRequest {\n  sessionId: string;\n  [key: string]: any;\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"security-best-practices",children:(0,i.jsx)(n.strong,{children:"Security Best Practices"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Protect Your Signing Secret"}),": Ensure your ",(0,i.jsx)(n.code,{children:"signingSecret"})," is stored securely in environment variables."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Verify Signatures"}),": Always enable ",(0,i.jsx)(n.code,{children:"verification"})," for sensitive webhook endpoints."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rate Limit Your API"}),": Use rate-limiting middleware to prevent abuse."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"license",children:(0,i.jsx)(n.strong,{children:"License"})}),"\n",(0,i.jsx)(n.p,{children:"MIT License \xa9 2025 Weekend Dev Labs"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(6540);const i={},t=r.createContext(i);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);