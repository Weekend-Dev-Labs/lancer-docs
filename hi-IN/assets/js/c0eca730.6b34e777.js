"use strict";(self.webpackChunklancer_docs=self.webpackChunklancer_docs||[]).push([[671],{8977:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"libraries and sdk/next-js-server-sdk","title":"Next.js Server SDK","description":"Installation","source":"@site/docs/libraries and sdk/next-js-server-sdk.md","sourceDirName":"libraries and sdk","slug":"/libraries and sdk/next-js-server-sdk","permalink":"/lancer-docs/hi-IN/docs/libraries and sdk/next-js-server-sdk","draft":false,"unlisted":false,"editUrl":"https://github.com/weekend-dev-labs/lancer-docs/docs/libraries and sdk/next-js-server-sdk.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Next.js Server SDK"},"sidebar":"tutorialSidebar","previous":{"title":"Client Side SDK","permalink":"/lancer-docs/hi-IN/docs/libraries and sdk/client-side-sdk"},"next":{"title":"Express.js SDK","permalink":"/lancer-docs/hi-IN/docs/libraries and sdk/express-js-server-sdk"}}');var r=s(4848),i=s(8453);const o={sidebar_position:1,title:"Next.js Server SDK"},d=void 0,l={},c=[{value:"<strong>Installation</strong>",id:"installation",level:2},{value:"<strong>Getting Started</strong>",id:"getting-started",level:2},{value:"<strong>1. Initialize the Lancer SDK</strong>",id:"1-initialize-the-lancer-sdk",level:3},{value:"<strong>2. Set Up API Routes</strong>",id:"2-set-up-api-routes",level:3},{value:"<strong>Authentication Endpoint</strong>",id:"authentication-endpoint",level:3},{value:"Example Request",id:"example-request",level:5},{value:"Example Response",id:"example-response",level:5},{value:"<strong>Webhook Endpoint</strong>",id:"webhook-endpoint",level:3},{value:"Verification Workflow",id:"verification-workflow",level:5},{value:"Example Webhook Payload",id:"example-webhook-payload",level:5},{value:"Important",id:"important",level:3},{value:"<strong>Security Best Practices</strong>",id:"security-best-practices",level:2},{value:"<strong>License</strong>",id:"license",level:2}];function a(e){const n={code:"code",h2:"h2",h3:"h3",h5:"h5",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"installation",children:(0,r.jsx)(n.strong,{children:"Installation"})}),"\n",(0,r.jsx)(n.p,{children:"Install the SDK via npm:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install lancer-next-sdk\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"getting-started",children:(0,r.jsx)(n.strong,{children:"Getting Started"})}),"\n",(0,r.jsx)(n.h3,{id:"1-initialize-the-lancer-sdk",children:(0,r.jsx)(n.strong,{children:"1. Initialize the Lancer SDK"})}),"\n",(0,r.jsxs)(n.p,{children:["Create a reusable instance of the ",(0,r.jsx)(n.code,{children:"Lancer"})," class with your ",(0,r.jsx)(n.code,{children:"webhookSecret"})," for signature verification. Store this in a shared module for easy access across your API routes."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import Lancer from "lancer-next-sdk";\n\nconst lancer = new Lancer({\n  webhookSecret: "<your-lancer-webhook-secret>",\n});\n\nexport default lancer;\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"webhookSecret"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Secret key used to verify webhook signatures."})]})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"2-set-up-api-routes",children:(0,r.jsx)(n.strong,{children:"2. Set Up API Routes"})}),"\n",(0,r.jsx)(n.h3,{id:"authentication-endpoint",children:(0,r.jsx)(n.strong,{children:"Authentication Endpoint"})}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"authenticate"})," method to handle session authentication in a Next.js API route. Implement your custom logic within the handler."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import lancer from "@/lib/lancer";\n\nexport const POST = lancer.authenticate(async (token, payload) => {\n  console.log("Session Payload:", payload);\n\n  // Custom authentication logic\n  return {\n    ownerId: "<user-id>", // Replace with actual user/owner ID\n    status: 200, // HTTP status code\n  };\n});\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"token"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsxs)(n.td,{children:["Lancer session token from the ",(0,r.jsx)(n.code,{children:"Authorization"})," header."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"payload"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"SessionRequest"})}),(0,r.jsx)(n.td,{children:"Payload containing session details from Lancer."})]})]})]}),"\n",(0,r.jsx)(n.h5,{id:"example-request",children:"Example Request"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'POST /api/auth\nAuthorization: Bearer <token>\n{\n  "file_size": 10485760,     \n  "file_name": "example.txt",\n  "max_chunk": 2,            \n  "chunk_size": 5242880,     \n  "provider": "LOCAL"    \n}\n'})}),"\n",(0,r.jsx)(n.h5,{id:"example-response",children:"Example Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "ownerId": "user123"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"webhook-endpoint",children:(0,r.jsx)(n.strong,{children:"Webhook Endpoint"})}),"\n",(0,r.jsxs)(n.p,{children:["Handle webhook events sent by Lancer with the ",(0,r.jsx)(n.code,{children:"handleWebhook"})," method. Enable verification to ensure payload integrity using your ",(0,r.jsx)(n.code,{children:"webhookSecret"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import lancer from "@/lib/lancer";\n\nexport const POST = lancer.handleWebhook(async (event) => {\n  console.log("Webhook Event: ", event.event);\n\n  console.log("Webhook Data: ", event.data);\n\n  // Handle event data\n  return Response.json({}, { status: 200 });\n}, true);\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"handler"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(event: WebhookEvent) => Promise<Response>"})}),(0,r.jsx)(n.td,{children:"Callback function to process webhook events."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"verification"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsxs)(n.td,{children:["Enables payload verification (default: ",(0,r.jsx)(n.code,{children:"true"}),")."]})]})]})]}),"\n",(0,r.jsx)(n.h5,{id:"verification-workflow",children:"Verification Workflow"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The SDK verifies the ",(0,r.jsx)(n.code,{children:"x-timestamp"})," and ",(0,r.jsx)(n.code,{children:"x-signature"})," headers."]}),"\n",(0,r.jsx)(n.li,{children:"The payload is signed using HMAC SHA-256 and compared to the provided signature."}),"\n",(0,r.jsxs)(n.li,{children:["If the verification fails, the SDK responds with ",(0,r.jsx)(n.code,{children:"403 Access Restricted"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h5,{id:"example-webhook-payload",children:"Example Webhook Payload"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "FILE_UPLOAD",\n  "data": {\n    "id": "session-12345",\n    "file_size": 10485760,\n    "chunk_size": 5242880,\n    "max_chunk": 2,\n    "file_name": "example.txt",\n    "temp_path": "/tmp/session-12345",\n    "owner_id": "user-67890",\n    "current_chunk": 0,\n    "provider": "LOCAL"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"important",children:"Important"}),"\n",(0,r.jsxs)(n.p,{children:["Add the authentication endpoints & webhook handling payload to ",(0,r.jsx)(n.code,{children:"lancer"})," config file as ",(0,r.jsx)(n.code,{children:"auth-endpoint"})," & ",(0,r.jsx)(n.code,{children:"webhook-endpoint"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"security-best-practices",children:(0,r.jsx)(n.strong,{children:"Security Best Practices"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Protect Your Webhook Secret"}),": Ensure your ",(0,r.jsx)(n.code,{children:"webhookSecret"})," is stored securely in environment variables."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Verify Signatures"}),": Always enable ",(0,r.jsx)(n.code,{children:"verification"})," for sensitive webhook endpoints."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rate Limit Your API"}),": Use rate-limiting middleware to prevent abuse."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"license",children:(0,r.jsx)(n.strong,{children:"License"})}),"\n",(0,r.jsx)(n.p,{children:"MIT License \xa9 2025 Weekend Dev Labs"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>d});var t=s(6540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);